name: ðŸ¤–Add Issue to Project


defaults:
  run:
    shell: pwsh


on:
  workflow_dispatch:
  issues:
    types: opened


jobs:
  add_issue_to_project:
    name: Add Issue To Project
    runs-on: ubuntu-latest
    steps:
    - name: Set Up Deno
      uses: denoland/setup-deno@v1
      with:
        deno-version: v1.x

    - name: Add Issue
      run: |
        <# Script Args:
          Repo Name
          Issue Number
          Issue Type: 'issue' or 'pr'
          Project To Add Issue To
          Token
        #>

        $scriptUrl = "$scriptUrl = "${{ vars.SCRIPT_BASE_URL }}/${{ vars.CICD_SCRIPTS_VERSION }}/${{ vars.SCRIPT_RELATIVE_DIR_PATH }}/add-item-to-project.ts";

        deno run `
          --allow-read `
          --allow-net=api.github.com `
          "$scriptUrl" `
          "${{ vars.PROJECT_NAME }}" `
          "${{ github.event.issue.number }}" `
          "issue" `
          "${{ vars.ORG_PROJECT_NAME }}" `
          "${{ secrets.CICD_REST_API }}";
